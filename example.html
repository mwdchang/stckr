<html>
<head>
<script src="d3.min.js"></script>
<script src="stckr.js"></script>
<link rel="stylesheet" href="stckr.css">
<style>
body {
  margin: 1rem;
  font-family: Tahoma;
}

button {
  padding: 0.25rem;
  margin: 0.25rem;
}
</style>
</head>
<body>
  <p>This is a stacked-grid test. Drag each track up/down to swap their positions.</p>
  <button onclick="addTrack()">Add track</button>
  <button onclick="removeTrack()">Remove track</button>
  <button onclick="toggleFit()" id="fitBtn">Use default sizes</button>
  <div class="stckr">
  </div>
</body>
<script>
var stckr = new Stckr( d3.select('.stckr'), {
  useDragHandle: true,
  dragEndFn: function() { console.log(stckr.stack.map(function(s){return s.order;})); }
});
var c = 0;
stckr.addTrack(++c);
stckr.modifyTrackWeight(1, 1.4);
stckr.addTrack(++c);
stckr.modifyTrackWeight(2, 1.8);
stckr.addTrack(++c);
stckr.addTrack(++c);
stckr.addTrack(++c);
stckr.enable();

function fit() { stckr.setWeightThreshold(0); }

function scroll() { stckr.setWeightThreshold(8); }

function addTrack() { stckr.addTrack(++c); }

function removeTrack() {
  stckr.removeTrack( stckr.getByOrder(0).trackId );
}

function toggleFit() {
  if (stckr.weightThreshold !== 0) {
    stckr.setWeightThreshold(0);
    d3.select('#fitBtn').text('Use default sizes');
  } else {
    stckr.setWeightThreshold(7);
    d3.select('#fitBtn').text('Fit all items');
  }
}

</script>
</html>
